{"version":3,"file":"aes.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["\nimport {randomBytes} from 'crypto';\nconst Aes = require('aes-256-gcm');\nimport serialize from 'serialize-javascript';\nimport {SerializeJSOptions} from 'serialize-javascript';\nconst serializeOptions:SerializeJSOptions = {\n    ignoreFunction:true,\n}\nconst delimiter = `PB13A35`;\nfunction encrypt(decrypted:any,secret:string):string{\n    if(typeof decrypted == 'undefined') throw new Error(\"decrypted is undefined\");\n    if(typeof secret != 'string' || secret == null) {\n        secret = randomBytes(16).toString('hex');\n    }\n    const obj = {DECRYPTED:decrypted};\n    let serialized:string=''\n    try{\n        serialized = JSON.stringify(obj);\n    } catch {\n        serialized =  serialize(obj, serializeOptions)\n    }\n    \n    \n    const res = Aes.encrypt(serialized,secret);\n    const encrypted = `${res.ciphertext}${delimiter}${res.iv}${delimiter}${res.tag}`;\n    return encrypted;\n}\nfunction decrypt(encrypted:string,secret:string):any{\n    const [ciphertext,iv,tag] = encrypted.split(delimiter);\n    const serialized = Aes.decrypt(ciphertext,iv,tag,secret);\n    const deserialized = eval('(' + serialized + ')');\n    return deserialized.DECRYPTED;\n}\n\nexport {\n    encrypt,\n    decrypt,\n}\n"],"names":["Aes","require","serializeOptions","ignoreFunction","delimiter","encrypt","decrypted","secret","Error","randomBytes","toString","obj","DECRYPTED","serialized","JSON","stringify","serialize","res","ciphertext","iv","tag","decrypt","encrypted","split","deserialized","eval"],"mappings":"gPAEMA,IAAMC,QAAQ,eAGdC,iBAAsC,CACxCC,gBAAe,GAEbC,oBACN,SAASC,QAAQC,EAAcC,GAC3B,QAAuB,IAAbD,EAA0B,MAAM,IAAIE,MAAM,0BAChC,iBAAVD,GAAgC,MAAVA,IAC5BA,EAASE,mBAAY,IAAIC,SAAS,QAEtC,IAAMC,EAAM,CAACC,UAAUN,GACnBO,EAAkB,GACtB,IACIA,EAAaC,KAAKC,UAAUJ,GAC9B,SACEE,EAAcG,UAAUL,EAAKT,kBAIjC,IAAMe,EAAMjB,IAAIK,QAAQQ,EAAWN,GAEnC,SADqBU,EAAIC,WAAad,UAAYa,EAAIE,GAAKf,UAAYa,EAAIG,IAG/E,SAASC,QAAQC,UAAiBf,QAC9B,qBAA4Be,UAAUC,MAAMnB,WAArCc,+BAAWC,uBAAGC,wBACfP,WAAab,IAAIqB,QAAQH,WAAWC,GAAGC,IAAIb,QAC3CiB,aAAeC,KAAK,IAAMZ,WAAa,KAC7C,OAAOW,aAAaZ"}